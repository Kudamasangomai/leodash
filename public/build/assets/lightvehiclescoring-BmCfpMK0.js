import{p as _,u as w,g as n,a as d,d as l,h as E,w as u,b as e,f as o,e as S,i as p,o as i,t as r,F as y,s as C,j as g,B as O,v as M}from"./app-1xFUSFDE.js";import{_ as P}from"./AuthenticatedLayout-Cly82pNB.js";import{M as $}from"./MainContent-T_qTnnwA.js";import{P as A,a as N}from"./PageTitle-8d9L2uLL.js";import{P as F}from"./PrimaryButton-Dix1JFjR.js";import{a as B,_ as H}from"./SecondaryButton-CsxmGPW2.js";import{S as T}from"./Spinner-Df5oo5V6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"p-6 mb-4 space-y-6 shadow-sm bg-white rounded-md"},j={key:0,class:"mt-1 text-sm text-red-600"},q={class:"flex items-center"},G={key:0,class:"flex items-center"},I={class:"px-2 overflow-x-auto"},R={class:"mb-2 text-right"},z={class:"min-w-full text-center border border-gray-200"},J={class:"divide-y divide-gray-200 whitespace-nowrap"},K={class:"px-4 py-3 border-r border-gray-200"},Q={class:"border-r border-gray-200"},W={class:"border-r border-gray-200"},X={class:"border-r border-gray-200"},Y={class:"min-w-full rounded"},Z={class:"px-2 py-1"},ee={class:"px-2 py-1"},te={class:"px-2 py-1 whitespace-wrap"},se={class:"border-r border-gray-200"},re={class:"min-w-full rounded"},le={class:"px-2 py-1"},ae={class:"px-2 py-1"},oe={class:"border-r border-gray-200"},de={class:"min-w-full rounded"},ne={class:"px-2 py-1"},ie={class:"px-2 py-1 whitespace-wrap"},ce={class:"border-r border-gray-200"},ue={class:"min-w-full rounded"},pe={class:"px-2 py-1"},be={class:"px-2 py-1 whitespace-wrap"},me={class:"border-r border-gray-200"},_e={class:"min-w-full rounded"},ye={class:"px-2 py-1"},ge={class:"px-2 py-1"},xe={class:"border-r border-gray-200"},fe={class:"min-w-full rounded"},he={class:"px-2 py-1"},ve={class:"px-2 py-1 whitespace-wrap"},ke={class:"p-4"},we=["value"],Se={key:0,class:"mt-1 text-sm text-red-600"},Ce={key:0,class:"mt-1 text-sm text-red-600"},Me={key:1,class:"mt-1 text-sm text-red-600"},Fe={class:"flex justify-end gap-3 mt-6"},Be={key:0,class:"flex items-center gap-2"},Ae={__name:"lightvehiclescoring",props:{report:Array,trucks:Array},setup(x){const f=_(!1),b=_(!1),V=()=>{b.value=!0},h=()=>{f.value=!1,b.value=!1},c=w({file:null,description:""}),m=_(null);function v(){c.reset(),m.value&&(m.value.value=null)}function D(){c.file&&c.post("/lightvehiclescoring/upload",{preserveScroll:!0,onSuccess:()=>{v(),f.value=!0},onError:k=>{alert(k.file??"Failed To Upload"),v()}})}const a=w({truck_id:"",start_date:"",end_date:""}),U=()=>{a.post("/lightvehiclescoring/scoringReport",{onSuccess:()=>closeFormModal()})};return(k,t)=>(i(),n(y,null,[d(l(E),{title:"Shunts n Buses"}),d(P,null,{default:u(()=>[d($,null,{default:u(()=>[d(A,null,{default:u(()=>[d(N,null,{default:u(()=>[...t[6]||(t[6]=[o("Light Vehicle Scoring",-1)])]),_:1}),t[7]||(t[7]=e("div",null,[e("div")],-1))]),_:1}),e("div",L,[e("form",{onSubmit:S(D,["prevent"]),enctype:"multipart/form-data",class:"space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium"}," Select Excel File (.xls or .xlsx) ",-1)),e("input",{type:"file",accept:".xlsx,.xls",ref_key:"fileInput",ref:m,onChange:t[0]||(t[0]=s=>l(c).file=s.target.files[0]),required:"",class:"block w-full p-4 mt-1 text-sm"},null,544),l(c).errors.file?(i(),n("div",j,r(l(c).errors.file),1)):p("",!0)]),e("div",q,[d(F,{type:"submit",disabled:l(c).processing},{default:u(()=>[t[9]||(t[9]=o(" Upload ",-1)),l(c).processing?(i(),n("span",G,[d(T)])):p("",!0)]),_:1},8,["disabled"]),d(B,{type:"button",class:"ms-3",onClick:t[1]||(t[1]=s=>l(c).reset("file"))},{default:u(()=>[...t[10]||(t[10]=[o(" Cancel ",-1)])]),_:1})])],32)]),e("div",I,[e("div",R,[e("button",{onClick:t[2]||(t[2]=s=>V()),class:"hidden px-3 py-1 text-white bg-blue-500 rounded hover:bg-blue-600"}," Generate ")]),e("table",z,[t[11]||(t[11]=e("thead",{class:"bg-gray-200"},[e("tr",null,[e("th",{class:"p-2 border border-r border-gray-300"},[o(" Truck "),e("tr",null,[e("td",{class:"text-gray-200"},"-")])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Total Distance "),e("tr",null,[e("td",{class:"text-gray-200"},"-")])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Total Duration "),e("tr",null,[e("td",{class:"text-gray-200"},"-")])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Overspeeding "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Score"),e("th",{class:"px-2 py-1"},"Occ"),e("th",{class:"px-2 py-1"},"Max")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Over Reving "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Score"),e("th",{class:"px-2 py-1"},"Max")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Harsh Acceleration "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Max"),e("th",{class:"px-2 py-1"},"Score")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Harsh Braking "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Max"),e("th",{class:"px-2 py-1"},"Score")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Exessive idle "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Occ"),e("th",{class:"px-2 py-1"},"Dur")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" GreenBand % "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Score"),e("th",{class:"px-2 py-1"},"Dur")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Overall Score "),e("tr",null,[e("td",{class:"text-gray-200"},"-")])])])],-1)),e("tbody",J,[(i(!0),n(y,null,C(x.report,s=>(i(),n("tr",{key:s.asset_name,class:"text-[14px] text-slate-900 border border-gray-200"},[e("td",K,r(s.asset_name),1),e("td",Q,r(s.total_distance),1),e("td",W,r(s.total_duration_time),1),e("td",X,[e("table",Y,[e("tr",null,[e("td",Z,r(s.overspeed_score),1),e("td",ee,r(s.overspeed_occ),1),e("td",te,r(s.overspeed_max),1)])])]),e("td",se,[e("table",re,[e("tr",null,[e("td",le,r(s.overrev_score),1),e("td",ae,r(s.overrev_max),1)])])]),e("td",oe,[e("table",de,[e("tr",null,[e("td",ne,r(s.harsh_acc_max),1),e("td",ie,r(s.harsh_acc_score),1)])])]),e("td",ce,[e("table",ue,[e("tr",null,[e("td",pe,r(s.harsh_brake_max),1),e("td",be,r(s.harsh_brake_score),1)])])]),e("td",me,[e("table",_e,[e("tr",null,[e("td",ye,r(s.idle_occ),1),e("td",ge,r(s.idle_duration_time),1)])])]),e("td",xe,[e("table",fe,[e("tr",null,[e("td",he,r(s.greenband_percentage),1),e("td",ve,r(s.greenband_duration_time),1)])])]),e("td",null,r(s.overall_score),1)]))),128))])])])]),_:1}),d(H,{show:b.value,onClose:h},{default:u(()=>[e("div",ke,[t[18]||(t[18]=e("h2",{class:"text-lg font-medium text-gray-900"}," Select truck and date range / Leave blank to generate all Assets ",-1)),e("form",{onSubmit:S(U,["prevent"]),class:"space-y-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Truck",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(a).truck_id=s),required:"",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},[t[12]||(t[12]=e("option",{value:""},"Select a truck",-1)),(i(!0),n(y,null,C(x.trucks,s=>(i(),n("option",{key:s.id,value:s.id},r(s.unitname),9,we))),128))],512),[[O,l(a).truck_id]]),l(a).errors.truck_id?(i(),n("div",Se,r(l(a).errors.truck_id),1)):p("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block my-4 text-sm font-medium text-gray-700"},"start time",-1)),g(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(a).start_date=s),type:"datetime-local",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},null,512),[[M,l(a).start_date]]),l(a).errors.start_date?(i(),n("div",Ce,r(l(a).errors.start_date),1)):p("",!0),t[15]||(t[15]=e("label",{class:"block my-4 text-sm font-medium text-gray-700"},"End time",-1)),g(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(a).end_date=s),type:"datetime-local",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},null,512),[[M,l(a).end_date]]),l(a).errors.end_date?(i(),n("div",Me,r(l(a).errors.end_date),1)):p("",!0)]),e("div",Fe,[d(B,{onClick:h},{default:u(()=>[...t[16]||(t[16]=[o("Cancel",-1)])]),_:1}),d(F,{type:"submit",disabled:l(a).processing},{default:u(()=>[t[17]||(t[17]=o(" Create ",-1)),l(a).processing?(i(),n("span",Be,[d(T)])):p("",!0)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64))}};export{Ae as default};

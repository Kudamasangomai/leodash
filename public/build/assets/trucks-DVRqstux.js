import{p as y,u as T,H as A,g as l,a as n,d as o,h as B,w as m,b as e,f as x,o as a,t as d,F as b,s as h,c as V,l as E,n as N,e as H,i as c,j as g,v as P,B as w,A as $}from"./app-Cbg-TvRk.js";import{_ as L}from"./AuthenticatedLayout-CrP1IZML.js";import{M as U}from"./MainContent-Btj49-6j.js";import{P as j,a as z}from"./PageTitle-CpPTCgXs.js";import{P as k}from"./PrimaryButton-QfSp1xYP.js";import{E as q}from"./Editicon-B70ftlrJ.js";import{_ as D,a as I}from"./SecondaryButton-DUIlwm0n.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={key:0,class:"mr-2 bx bx-chat"},G={key:1,class:"w-5 h-5 mr-2 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},J={class:"p-6 overflow-x-auto"},K={class:"overflow-x-auto"},O={class:"min-w-full border border-gray-200"},Q={class:"divide-y divide-gray-200 whitespace-nowrap"},W={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},X={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Y={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Z={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},ee={class:"px-4 py-3 text-[14px] text-slate-600 border-r border-gray-200"},te=["onClick"],se={class:"m-4 mt-6 md:flex"},re={class:"flex gap-2 mt-4 justify-end"},oe={class:"p-6 bg-white"},ae={class:"mb-4 text-lg font-medium text-gray-900"},le={key:0},ne={key:0,class:"mt-1 text-sm text-red-600"},de={key:0,class:"mt-1 text-sm text-red-600"},ie={key:1},ue={key:0,class:"mt-1 text-sm text-red-600"},me={class:"flex justify-end gap-3 mt-6"},pe={key:0,class:"flex items-center gap-2"},we={__name:"trucks",props:{trucks:Array},setup(_){const p=y(!1),f=y(!1),i=y(null);function C(){p.value||(p.value=!0,$.visit("/trucks/fetch",{method:"get",preserveState:!0,onFinish:()=>{p.value=!1}}))}const s=T({unitname:"",status:"",make:""}),M=u=>{i.value=u,s.unitname=u.unitname,s.status=u.status,s.make=u.make,f.value=!0},S=()=>{i.value&&s.put(`/trucks/${i.value.id}`,{onSuccess:()=>v(),onError:u=>{console.log("Errors:",u)}})},v=()=>{f.value=!1,s.reset(),i.value=null};return(u,t)=>{const F=A("Spinner");return a(),l(b,null,[n(o(B),{title:"Trucks"}),n(L,null,{default:m(()=>[n(U,null,{default:m(()=>[n(j,null,{default:m(()=>[n(z,null,{default:m(()=>[...t[3]||(t[3]=[x("Trucks",-1)])]),_:1}),e("div",null,[e("div",null,[n(k,{disabled:p.value,onClick:C},{default:m(()=>[t[5]||(t[5]=e("svg",{class:"w-5 h-5 mr-2 -ml-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),p.value?(a(),l("svg",G,[...t[4]||(t[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(a(),l("i",R)),x(" "+d(p.value?"Syncing...":"Fetch Trucks"),1)]),_:1},8,["disabled"])])])]),_:1}),e("div",J,[e("div",K,[e("table",O,[t[6]||(t[6]=e("thead",{class:"bg-gray-300 whitespace-nowrap"},[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Asset Name "),e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Make "),e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Status "),e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Last reported At "),e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Action ")])],-1)),e("tbody",Q,[(a(!0),l(b,null,h(_.trucks.data,r=>(a(),l("tr",{class:"odd:bg-gray-50",key:r.id},[e("td",W,d(r.unitname),1),e("td",X,d(r.make),1),e("td",Y,d(r.status===1?"Active":"Inactive"),1),e("td",Z,d(r.last_reported_at),1),e("td",ee,[e("button",{onClick:ce=>M(r)},[n(q)],8,te)])]))),128))])])]),e("div",se,[t[7]||(t[7]=e("p",{class:"flex-1 text-sm text-slate-600"}," Showing 1 to 5 of 100 entries ",-1)),e("div",re,[(a(!0),l(b,null,h(_.trucks.links,r=>(a(),V(o(E),{key:r.label,href:r.url??"",innerHTML:r.label,class:N(["px-3 py-1 border rounded border-gray-200",{"bg-blue-500 text-white":r.active,"text-gray-400":!r.url}]),"preserve-scroll":""},null,8,["href","innerHTML","class"]))),128))])])])]),_:1}),n(D,{show:f.value,onClose:v},{default:m(()=>[e("div",oe,[e("h2",ae,d(i.value?"Edit Truck":"Create New Repair"),1),e("form",{onSubmit:H(S,["prevent"]),class:"space-y-4"},[i.value?(a(),l("div",le,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Asset Name",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o(s).unitname=r),type:"text",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},null,512),[[P,o(s).unitname]]),o(s).errors.unitname?(a(),l("div",ne,d(o(s).errors.unitname),1)):c("",!0)])):c("",!0),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>o(s).status=r),required:"",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},[...t[9]||(t[9]=[e("option",{value:1},"Active",-1),e("option",{value:0},"Inactive",-1)])],512),[[w,o(s).status]]),o(s).errors.status?(a(),l("div",de,d(o(s).errors.status),1)):c("",!0)]),i.value?(a(),l("div",ie,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"Make",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>o(s).make=r),required:"",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},[...t[11]||(t[11]=[e("option",{value:"Shacman"},"Shacman",-1),e("option",{value:"Argosy"},"Argosy",-1),e("option",{value:"Fld"},"Fld",-1)])],512),[[w,o(s).make]]),o(s).errors.make?(a(),l("div",ue,d(o(s).errors.make),1)):c("",!0)])):c("",!0),e("div",me,[n(I,{onClick:v},{default:m(()=>[...t[13]||(t[13]=[x("Cancel",-1)])]),_:1}),n(k,{type:"submit",disabled:o(s).processing},{default:m(()=>[x(d(i.value?"Update":"Create")+" ",1),u.isFetching||o(s).processing?(a(),l("span",pe,[n(F)])):c("",!0)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64)}}};export{we as default};

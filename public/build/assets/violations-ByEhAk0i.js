import{p as _,u as V,g as i,a as s,d as p,h as M,w as d,b as t,f as u,e as B,i as h,o as c,t as o,F as y,s as C}from"./app-B4vetDZU.js";import{_ as P}from"./AuthenticatedLayout-Dn9BMUh1.js";import{M as $}from"./MainContent-D1CjACee.js";import{P as N,a as j}from"./PageTitle-B5Ud6UGS.js";import{P as O}from"./PrimaryButton-CoVjMa8r.js";import{a as v,_ as k}from"./SecondaryButton-vOtPkqa5.js";import{S as T}from"./Spinner-BEFfG9vT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"p-6 mb-4 space-y-6 bg-white rounded-md shadow-sm"},L={key:0,class:"mt-1 text-sm text-red-600"},R={class:"flex items-center"},q={key:0,class:"flex items-center"},A={class:"mb-2 text-lg font-bold"},G={class:"mb-2 text-right"},H=["onClick"],I={class:"px-2 overflow-x-auto"},z={class:"min-w-full border border-gray-200"},J=["id"],K={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Q={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},W={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},X={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Y={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Z={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},tt={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},et={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},st={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},ot={class:"p-4"},lt={class:"flex justify-end mt-6"},rt={class:"p-4"},at={class:"text-lg font-medium text-gray-900"},dt={class:"font-bold"},nt={class:"flex justify-end mt-6"},_t={__name:"violations",props:{violations:Object},setup(S){const m=_(!1),x=_(!1),f=()=>{m.value=!1,x.value=!1},a=V({file:null});function E(l){const e=l.target.files&&l.target.files[0]?l.target.files[0]:null;a.file=e}function D(){a.file&&a.post("/violations/upload",{preserveScroll:!0,onSuccess:()=>{a.reset(),m.value=!0},onError:l=>{alert(l.file??"Failed To Upload"),a.reset()}})}const g=_("");function w(l){g.value=l,x.value=!0}function F(l){const e=document.getElementById("table-"+l);if(!e)return;const n=document.createElement("textarea");n.value=e.innerText,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),x.value=!0,w(l)}return(l,e)=>(c(),i(y,null,[s(p(M),{title:"Violations"}),s(P,null,{default:d(()=>[s($,null,{default:d(()=>[s(N,null,{default:d(()=>[s(j,null,{default:d(()=>[...e[1]||(e[1]=[u(" Daily Violations Report",-1)])]),_:1}),e[2]||(e[2]=t("div",null,[t("div")],-1))]),_:1}),t("div",U,[t("form",{onSubmit:B(D,["prevent"]),enctype:"multipart/form-data",class:"space-y-4"},[e[6]||(e[6]=t("div",{class:"font-bold text-blue-500"}," Download the Events report as csv then convert to .xls or .xlsx then upload ",-1)),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"}," Select Excel File (.xls or .xlsx) ",-1)),t("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:E,required:"",class:"block w-full p-4 mt-1 text-sm text-gray-700"},null,32),p(a).errors.file?(c(),i("div",L,o(p(a).errors.file),1)):h("",!0)]),t("div",R,[s(O,{type:"submit",disabled:p(a).processing},{default:d(()=>[e[4]||(e[4]=u(" Upload ",-1)),p(a).processing?(c(),i("span",q,[s(T)])):h("",!0)]),_:1},8,["disabled"]),s(v,{type:"button",class:"ms-3",onClick:e[0]||(e[0]=n=>p(a).reset("file"))},{default:d(()=>[...e[5]||(e[5]=[u(" Cancel ",-1)])]),_:1})])],32)]),(c(!0),i(y,null,C(S.violations,(n,b)=>(c(),i("div",{key:b,class:"py-4 mb-8 text-center"},[t("h2",A,o(b)+" Events",1),t("div",G,[t("button",{onClick:r=>F(b),class:"px-3 py-1 text-white bg-blue-500 rounded hover:bg-blue-600"}," Copy Table ",8,H)]),t("div",I,[t("table",z,[e[7]||(e[7]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"p-2 border"},"Date"),t("th",{class:"p-2 border"},"Asset"),t("th",{class:"p-2 border"},"Driver"),t("th",{class:"p-2 border"},"Location"),t("th",{class:"p-2 border"},"Duration"),t("th",{class:"p-2 border"},"Max Speed"),t("th",{class:"p-2 border"},"Destination"),t("th",{class:"p-2 border"},"Coordinates"),t("th",{class:"p-2 border"},"Event")])],-1)),t("tbody",{id:"table-"+b,class:"divide-y divide-gray-200 whitespace-nowrap"},[(c(!0),i(y,null,C(n,r=>(c(),i("tr",{key:r.id,class:"text-center odd:bg-gray-50"},[t("td",K,o(r.date),1),t("td",Q,o(r.asset),1),t("td",W,o(r.driver),1),t("td",X,o(r.location),1),t("td",Y,o(r.duration),1),t("td",Z,o(r.max_speed),1),t("td",tt,o(r.destination),1),t("td",et,o(r.coordinates),1),t("td",st,o(r.event_type),1)]))),128))],8,J)])])]))),128))]),_:1}),s(k,{show:m.value,onClose:f},{default:d(()=>[t("div",ot,[e[9]||(e[9]=t("h2",{class:"text-lg font-medium text-gray-900"}," Violation Report Succesfully Generated ",-1)),t("div",lt,[s(v,{onClick:f},{default:d(()=>[...e[8]||(e[8]=[u(" Ok ",-1)])]),_:1})])])]),_:1},8,["show"]),s(k,{show:x.value,onClose:f},{default:d(()=>[t("div",rt,[t("h2",at,[t("span",dt,o(g.value),1),e[10]||(e[10]=u(" Succesfully Copied to Clipboard ",-1))]),t("div",nt,[s(v,{onClick:f},{default:d(()=>[...e[11]||(e[11]=[u(" Ok ",-1)])]),_:1})])])]),_:1},8,["show"])]),_:1})],64))}};export{_t as default};

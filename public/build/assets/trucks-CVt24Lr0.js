import{p as b,u as T,H as F,g as n,a as o,d as a,h as A,w as i,b as t,f as p,o as l,t as d,F as y,s as _,c as B,l as E,n as N,e as V,i as x,j as h,v as H,z as P,G as $}from"./app-Df6YB4EY.js";import{_ as z}from"./AuthenticatedLayout-CAxezRTt.js";import{M as L}from"./MainContent-BQ80gGTF.js";import{P as j,a as U}from"./PageTitle-DlFCvucu.js";import{P as w}from"./PrimaryButton-JWqA-FVe.js";import{E as D}from"./Editicon-CgJ3wk_X.js";import{_ as I,a as q}from"./SecondaryButton-DjAtAzFr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={key:0,class:"mr-2 bx bx-chat"},R={key:1,class:"w-5 h-5 mr-2 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},J={class:"p-6 overflow-x-auto"},K={class:"overflow-x-auto"},O={class:"min-w-full border border-gray-200"},Q={class:"divide-y divide-gray-200 whitespace-nowrap"},W={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},X={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Y={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Z={class:"px-4 py-3 text-[14px] text-slate-600 border-r border-gray-200"},tt=["onClick"],et={class:"m-4 mt-6 md:flex"},st={class:"flex gap-2 mt-4 justify-end"},rt={class:"p-6 bg-white"},at={class:"mb-4 text-lg font-medium text-gray-900"},ot={key:0},lt={key:0,class:"mt-1 text-sm text-red-600"},nt={key:0,class:"mt-1 text-sm text-red-600"},it={class:"flex justify-end gap-3 mt-6"},dt={key:0,class:"flex items-center gap-2"},gt={__name:"trucks",props:{trucks:Array},setup(g){const m=b(!1),f=b(!1),u=b(null);function k(){m.value||(m.value=!0,$.visit("/trucks/fetch",{method:"get",preserveState:!0,onFinish:()=>{m.value=!1}}))}const r=T({unitname:"",status:""}),C=c=>{u.value=c,r.unitname=c.unitname,r.status=c.status,f.value=!0},M=()=>{u.value&&r.put(`/trucks/${u.value.id}`,{onSuccess:()=>v(),onError:c=>{console.log("Errors:",c)}})},v=()=>{f.value=!1,r.reset(),u.value=null};return(c,e)=>{const S=F("Spinner");return l(),n(y,null,[o(a(A),{title:"Trucks"}),o(z,null,{default:i(()=>[o(L,null,{default:i(()=>[o(j,null,{default:i(()=>[o(U,null,{default:i(()=>[...e[2]||(e[2]=[p("Trucks",-1)])]),_:1}),t("div",null,[t("div",null,[o(w,{disabled:m.value,onClick:k},{default:i(()=>[e[4]||(e[4]=t("svg",{class:"w-5 h-5 mr-2 -ml-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(l(),n("svg",R,[...e[3]||(e[3]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(l(),n("i",G)),p(" "+d(m.value?"Syncing...":"Fetch Trucks"),1)]),_:1},8,["disabled"])])])]),_:1}),t("div",J,[t("div",K,[t("table",O,[e[5]||(e[5]=t("thead",{class:"bg-gray-300 whitespace-nowrap"},[t("tr",{class:"border-b border-gray-200"},[t("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Asset Name "),t("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Status "),t("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Last reported At "),t("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Action ")])],-1)),t("tbody",Q,[(l(!0),n(y,null,_(g.trucks.data,s=>(l(),n("tr",{class:"odd:bg-gray-50",key:s.id},[t("td",W,d(s.unitname),1),t("td",X,d(s.status===1?"Active":"Inactive"),1),t("td",Y,d(s.last_reported_at),1),t("td",Z,[t("button",{onClick:ut=>C(s)},[o(D)],8,tt)])]))),128))])])]),t("div",et,[e[6]||(e[6]=t("p",{class:"flex-1 text-sm text-slate-600"}," Showing 1 to 5 of 100 entries ",-1)),t("div",st,[(l(!0),n(y,null,_(g.trucks.links,s=>(l(),B(a(E),{key:s.label,href:s.url??"",innerHTML:s.label,class:N(["px-3 py-1 border rounded border-gray-200",{"bg-blue-500 text-white":s.active,"text-gray-400":!s.url}]),"preserve-scroll":""},null,8,["href","innerHTML","class"]))),128))])])])]),_:1}),o(I,{show:f.value,onClose:v},{default:i(()=>[t("div",rt,[t("h2",at,d(u.value?"Edit Truck":"Create New Repair"),1),t("form",{onSubmit:V(M,["prevent"]),class:"space-y-4"},[u.value?(l(),n("div",ot,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Asset Name",-1)),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a(r).unitname=s),type:"text",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},null,512),[[H,a(r).unitname]]),a(r).errors.unitname?(l(),n("div",lt,d(a(r).errors.unitname),1)):x("",!0)])):x("",!0),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a(r).status=s),required:"",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},[...e[8]||(e[8]=[t("option",{value:""},"Select a Fault",-1),t("option",{value:1},"Active",-1),t("option",{value:0},"Inactive",-1)])],512),[[P,a(r).status]]),a(r).errors.status?(l(),n("div",nt,d(a(r).errors.status),1)):x("",!0)]),t("div",it,[o(q,{onClick:v},{default:i(()=>[...e[10]||(e[10]=[p("Cancel",-1)])]),_:1}),o(w,{type:"submit",disabled:a(r).processing},{default:i(()=>[p(d(u.value?"Update":"Create")+" ",1),c.isFetching||a(r).processing?(l(),n("span",dt,[o(S)])):x("",!0)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64)}}};export{gt as default};

import{p as _,u as v,g as n,a as d,d as l,h as O,w as u,b as e,f as o,e as k,i as p,o as i,t as r,F as y,q as w,j as g,y as P,v as S}from"./app-CIZ7AmoM.js";import{_ as U}from"./AuthenticatedLayout-BEx1sRbD.js";import{M as $}from"./MainContent-D3bVgs3l.js";import{P as A,a as E}from"./PageTitle-B9HBmuZ-.js";import{P as C}from"./PrimaryButton-Bl2TbVZn.js";import{a as M,_ as N}from"./SecondaryButton-CW8we_Ff.js";import{S as F}from"./Spinner-BFHtq1Zk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"p-6 mb-4 space-y-6 rounded shadow-sm"},H={key:0,class:"mt-1 text-sm text-red-600"},L={class:"flex items-center"},j={key:0,class:"flex items-center"},G={class:"px-2 overflow-x-auto"},I={class:"mb-2 text-right"},R={class:"min-w-full text-center border border-gray-200"},z={class:"divide-y divide-gray-200 whitespace-nowrap"},J={class:"px-4 py-3 border-r border-gray-200"},K={class:"border-r border-gray-200"},Q={class:"border-r border-gray-200"},W={class:"border-r border-gray-200"},X={class:"min-w-full rounded"},Y={class:"px-2 py-1"},Z={class:"px-2 py-1"},ee={class:"px-2 py-1 whitespace-wrap"},te={class:"border-r border-gray-200"},se={class:"min-w-full rounded"},re={class:"px-2 py-1"},le={class:"px-2 py-1"},ae={class:"border-r border-gray-200"},oe={class:"min-w-full rounded"},de={class:"px-2 py-1"},ne={class:"px-2 py-1 whitespace-wrap"},ie={class:"border-r border-gray-200"},ce={class:"min-w-full rounded"},ue={class:"px-2 py-1"},pe={class:"px-2 py-1 whitespace-wrap"},be={class:"border-r border-gray-200"},me={class:"min-w-full rounded"},_e={class:"px-2 py-1"},ye={class:"px-2 py-1"},ge={class:"border-r border-gray-200"},xe={class:"min-w-full rounded"},fe={class:"px-2 py-1"},he={class:"px-2 py-1 whitespace-wrap"},ve={class:"p-4"},ke=["value"],we={key:0,class:"mt-1 text-sm text-red-600"},Se={key:0,class:"mt-1 text-sm text-red-600"},Ce={key:1,class:"mt-1 text-sm text-red-600"},Me={class:"flex justify-end gap-3 mt-6"},Fe={key:0,class:"flex items-center gap-2"},Ee={__name:"lightvehiclescoring",props:{report:Array,trucks:Array},setup(x){const f=_(!1),b=_(!1),V=()=>{b.value=!0},h=()=>{f.value=!1,b.value=!1},c=v({file:null,description:""}),m=_(null);function B(){c.reset(),m.value&&(m.value.value=null)}function D(){c.file&&c.post("/lightvehiclescoring/upload",{preserveScroll:!0,onSuccess:()=>{B(),f.value=!0}})}const a=v({truck_id:"",start_date:"",end_date:""}),T=()=>{a.post("/lightvehiclescoring/scoringReport",{onSuccess:()=>closeFormModal()})};return(Ve,t)=>(i(),n(y,null,[d(l(O),{title:"Shunts n Buses"}),d(U,null,{default:u(()=>[d($,null,{default:u(()=>[d(A,null,{default:u(()=>[d(E,null,{default:u(()=>[...t[6]||(t[6]=[o("Light Vehicle Scoring",-1)])]),_:1}),t[7]||(t[7]=e("div",null,[e("div")],-1))]),_:1}),e("div",q,[e("form",{onSubmit:k(D,["prevent"]),enctype:"multipart/form-data",class:"space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium"}," Select Excel File (.xls or .xlsx) ",-1)),e("input",{type:"file",accept:".xlsx,.xls",ref_key:"fileInput",ref:m,onChange:t[0]||(t[0]=s=>l(c).file=s.target.files[0]),required:"",class:"block w-full p-4 mt-1 text-sm"},null,544),l(c).errors.file?(i(),n("div",H,r(l(c).errors.file),1)):p("",!0)]),e("div",L,[d(C,{type:"submit",disabled:l(c).processing},{default:u(()=>[t[9]||(t[9]=o(" Upload ",-1)),l(c).processing?(i(),n("span",j,[d(F)])):p("",!0)]),_:1},8,["disabled"]),d(M,{type:"button",class:"ms-3",onClick:t[1]||(t[1]=s=>l(c).reset("file"))},{default:u(()=>[...t[10]||(t[10]=[o(" Cancel ",-1)])]),_:1})])],32)]),e("div",G,[e("div",I,[e("button",{onClick:t[2]||(t[2]=s=>V()),class:"hidden px-3 py-1 text-white bg-blue-500 rounded hover:bg-blue-600"}," Generate ")]),e("table",R,[t[11]||(t[11]=e("thead",{class:"bg-gray-200"},[e("tr",null,[e("th",{class:"p-2 border border-r border-gray-300"},[o(" Truck "),e("tr",null,[e("td",{class:"text-gray-200"},"-")])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Total Distance "),e("tr",null,[e("td",{class:"text-gray-200"},"-")])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Total Duration "),e("tr",null,[e("td",{class:"text-gray-200"},"-")])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Overspeeding "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Score"),e("th",{class:"px-2 py-1"},"Occ"),e("th",{class:"px-2 py-1"},"Max")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Over Reving "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Score"),e("th",{class:"px-2 py-1"},"Max")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Harsh Acceleration "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Max"),e("th",{class:"px-2 py-1"},"Score")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Harsh Braking "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Max"),e("th",{class:"px-2 py-1"},"Score")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Exessive idle "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Occ"),e("th",{class:"px-2 py-1"},"Dur")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" GreenBand % "),e("table",{class:"min-w-full bg-white rounded"},[e("tr",{class:"bg-gray-200 w"},[e("th",{class:"px-2 py-1"},"Score"),e("th",{class:"px-2 py-1"},"Dur")])])]),e("th",{class:"p-2 border border-r border-gray-300"},[o(" Overall Score "),e("tr",null,[e("td",{class:"text-gray-200"},"-")])])])],-1)),e("tbody",z,[(i(!0),n(y,null,w(x.report,s=>(i(),n("tr",{key:s.asset_name,class:"text-[14px] text-slate-900 border border-gray-200"},[e("td",J,r(s.asset_name),1),e("td",K,r(s.total_distance),1),e("td",Q,r(s.total_duration_time),1),e("td",W,[e("table",X,[e("tr",null,[e("td",Y,r(s.overspeed_score),1),e("td",Z,r(s.overspeed_occ),1),e("td",ee,r(s.overspeed_max),1)])])]),e("td",te,[e("table",se,[e("tr",null,[e("td",re,r(s.overrev_score),1),e("td",le,r(s.overrev_max),1)])])]),e("td",ae,[e("table",oe,[e("tr",null,[e("td",de,r(s.harsh_acc_max),1),e("td",ne,r(s.harsh_acc_score),1)])])]),e("td",ie,[e("table",ce,[e("tr",null,[e("td",ue,r(s.harsh_brake_max),1),e("td",pe,r(s.harsh_brake_score),1)])])]),e("td",be,[e("table",me,[e("tr",null,[e("td",_e,r(s.idle_occ),1),e("td",ye,r(s.idle_duration_time),1)])])]),e("td",ge,[e("table",xe,[e("tr",null,[e("td",fe,r(s.greenband_percentage),1),e("td",he,r(s.greenband_duration_time),1)])])]),e("td",null,r(s.overall_score),1)]))),128))])])])]),_:1}),d(N,{show:b.value,onClose:h},{default:u(()=>[e("div",ve,[t[18]||(t[18]=e("h2",{class:"text-lg font-medium text-gray-900"}," Select truck and date range / Leave blank to generate all Assets ",-1)),e("form",{onSubmit:k(T,["prevent"]),class:"space-y-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Truck",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(a).truck_id=s),required:"",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},[t[12]||(t[12]=e("option",{value:""},"Select a truck",-1)),(i(!0),n(y,null,w(x.trucks,s=>(i(),n("option",{key:s.id,value:s.id},r(s.unitname),9,ke))),128))],512),[[P,l(a).truck_id]]),l(a).errors.truck_id?(i(),n("div",we,r(l(a).errors.truck_id),1)):p("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block my-4 text-sm font-medium text-gray-700"},"start time",-1)),g(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(a).start_date=s),type:"datetime-local",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},null,512),[[S,l(a).start_date]]),l(a).errors.start_date?(i(),n("div",Se,r(l(a).errors.start_date),1)):p("",!0),t[15]||(t[15]=e("label",{class:"block my-4 text-sm font-medium text-gray-700"},"End time",-1)),g(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(a).end_date=s),type:"datetime-local",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},null,512),[[S,l(a).end_date]]),l(a).errors.end_date?(i(),n("div",Ce,r(l(a).errors.end_date),1)):p("",!0)]),e("div",Me,[d(M,{onClick:h},{default:u(()=>[...t[16]||(t[16]=[o("Cancel",-1)])]),_:1}),d(C,{type:"submit",disabled:l(a).processing},{default:u(()=>[t[17]||(t[17]=o(" Create ",-1)),l(a).processing?(i(),n("span",Fe,[d(F)])):p("",!0)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64))}};export{Ee as default};

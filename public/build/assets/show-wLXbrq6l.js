import{p as h,u as F,g as a,a as o,d as u,h as B,w as n,b as t,f as p,e as M,i as m,o as d,t as i,F as _,s as k}from"./app-B4vetDZU.js";import{_ as P}from"./AuthenticatedLayout-Dn9BMUh1.js";import{M as $}from"./MainContent-D1CjACee.js";import{P as j,a as L}from"./PageTitle-B5Ud6UGS.js";import{P as N}from"./PrimaryButton-CoVjMa8r.js";import{a as g,_ as C}from"./SecondaryButton-vOtPkqa5.js";import{S as R}from"./Spinner-BEFfG9vT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"p-6 mb-4 space-y-6 rounded shadow-sm bg-white"},A={key:0,class:"mt-1 text-sm text-red-600"},D={class:"flex items-center"},O={key:0,class:"flex items-center"},U={class:"px-2 overflow-x-auto"},G={class:"mb-2 text-right"},q={id:"table-",class:"min-w-full border border-gray-200"},H={class:"divide-y divide-gray-200 whitespace-nowrap"},I={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},z={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},J={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},K={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Q={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},W={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},X={key:0},Y={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Z={key:0},tt={key:1},et={class:"p-4 bg-white"},st={class:"flex justify-end mt-6"},ot={class:"p-4"},rt={class:"text-lg font-medium text-gray-900"},lt={class:"font-bold"},at={class:"flex justify-end mt-6"},xt={__name:"show",props:{v:Object,reports:Array},setup(v){const x=h(!1),b=h(!1),c=()=>{x.value=!1,b.value=!1},r=F({file:null});function w(l){const e=l.target.files&&l.target.files[0]?l.target.files[0]:null;r.file=e}function E(){r.file&&r.post("/moving-report/upload",{preserveScroll:!0,onSuccess:()=>{r.reset(),x.value=!0},onError:l=>{alert(l.file??"Failed To Upload Early Start Report"),r.reset()}})}function S(){const l=document.getElementById("table-");if(!l)return;let e="";for(const f of l.rows){const y=Array.from(f.cells).map(T=>T.innerText.trim()).join("	");e+=y+`
`}const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),b.value=!0}return(l,e)=>(d(),a(_,null,[o(u(B),{title:"Early Start"}),o(P,null,{default:n(()=>[o($,null,{default:n(()=>[o(j,null,{default:n(()=>[o(L,null,{default:n(()=>[...e[2]||(e[2]=[p(" Early Start Report",-1)])]),_:1}),e[3]||(e[3]=t("div",null,[t("div")],-1))]),_:1}),t("div",V,[e[7]||(e[7]=t("div",{class:"text-blue-500 font-bold"}," Download the Moving report from Global track then convert to Excel 93 workbook then upload ",-1)),t("form",{onSubmit:M(E,["prevent"]),enctype:"multipart/form-data",class:"space-y-4"},[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"}," Select Excel File (.xls or .xlsx) ",-1)),t("input",{type:"file",accept:".xlsx,.xls",onChange:w,required:"",class:"block w-full p-4 mt-1 text-sm text-gray-700"},null,32),u(r).errors.file?(d(),a("div",A,i(u(r).errors.file),1)):m("",!0)]),t("div",D,[o(N,{type:"submit",disabled:u(r).processing},{default:n(()=>[e[5]||(e[5]=p(" Upload ",-1)),u(r).processing?(d(),a("span",O,[o(R)])):m("",!0)]),_:1},8,["disabled"]),o(g,{type:"button",class:"ms-3",onClick:e[0]||(e[0]=s=>u(r).reset("file"))},{default:n(()=>[...e[6]||(e[6]=[p(" Cancel ",-1)])]),_:1})])],32)]),t("div",U,[t("div",G,[t("button",{onClick:e[1]||(e[1]=s=>S()),class:"px-3 py-1 text-white bg-blue-500 rounded hover:bg-blue-600"}," Copy Table ")]),t("table",q,[e[9]||(e[9]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"p-2 border"},"Location"),t("th",{class:"p-2 border"},"Early Trucks"),t("th",{class:"p-2 border"},"Trucks E/R"),t("th",{class:"p-2 border"},"1st Truck"),t("th",{class:"p-2 border"},"Last Truck"),t("th",{class:"p-2 border"},"Last 3 Trucks"),t("th",{class:"p-2 border"},"After 6")])],-1)),t("tbody",H,[v.reports?(d(!0),a(_,{key:0},k(v.reports,s=>(d(),a("tr",{key:s.id,class:"text-center odd:bg-gray-50"},[t("td",I,i(s.location),1),t("td",z,i(s.total_trucks),1),t("td",J,i(s.total_trucks),1),t("td",K,i(s.first_time),1),t("td",Q,i(s.last_time),1),t("td",W,[s.last_3&&s.last_3.length?(d(),a("p",X,[(d(!0),a(_,null,k(s.last_3,(f,y)=>(d(),a("span",{key:y,class:"inline-block px-2 py-1 mr-1 rounded"},i(f.asset)+" ("+i(f.time)+") ",1))),128))])):m("",!0)]),t("td",Y,[s.last_3_after_6am!==void 0?(d(),a("p",Z,i(s.last_3_after_6am),1)):m("",!0)])]))),128)):(d(),a("tr",tt,[...e[8]||(e[8]=[t("td",null,"nothign to show",-1)])]))])])])]),_:1}),o(C,{show:x.value,onClose:c},{default:n(()=>[t("div",et,[e[11]||(e[11]=t("h2",{class:"text-lg font-medium text-gray-900"}," Early Start Report Succesfully Generated ",-1)),t("div",st,[o(g,{onClick:c},{default:n(()=>[...e[10]||(e[10]=[p(" Ok ",-1)])]),_:1})])])]),_:1},8,["show"]),o(C,{show:b.value,onClose:c},{default:n(()=>[t("div",ot,[t("h2",rt,[t("span",lt,i(l.selectedEventType),1),e[12]||(e[12]=p(" Succesfully Copied to Clipboard ",-1))]),t("div",at,[o(g,{onClick:c},{default:n(()=>[...e[13]||(e[13]=[p(" Ok ",-1)])]),_:1})])])]),_:1},8,["show"])]),_:1})],64))}};export{xt as default};

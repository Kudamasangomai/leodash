import{p as y,u as j,q as F,g as a,a as r,d as o,h as T,w as d,b as e,f as p,o as n,t as i,F as g,s as B,H as E,e as L,i as x,j as h,v as A,E as N,G as V}from"./app-CTlCvSXu.js";import{_ as P}from"./AuthenticatedLayout-CY6y9FkN.js";import{M as $}from"./MainContent-DRTpcsZA.js";import{P as z,a as H}from"./PageTitle-DfBTuTRh.js";import{P as w}from"./PrimaryButton-D2kFmfaC.js";import{E as D}from"./Editicon-jmpjaD_k.js";import{_ as I}from"./Modal-C1fZBKER.js";import{_ as U}from"./SecondaryButton-CVgmifqE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:0,class:"mr-2 bx bx-chat"},R={key:1,class:"w-5 h-5 mr-2 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},G={class:"p-6 overflow-x-auto"},J={class:"overflow-x-auto"},K={class:"min-w-full border border-gray-200"},O={class:"divide-y divide-gray-200 whitespace-nowrap"},Q={class:"px-4 py-3 border-r border-gray-200"},W={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},X={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Y={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Z={class:"px-4 py-3 text-[14px] text-slate-600 border-r border-gray-200"},ee=["onClick"],te={class:"p-6 bg-white"},se={class:"mb-4 text-lg font-medium text-gray-900"},re={key:0},oe={key:0,class:"mt-1 text-sm text-red-600"},le={key:0,class:"mt-1 text-sm text-red-600"},ae={class:"flex justify-end gap-3 mt-6"},ne={key:0,class:"flex items-center gap-2"},ye={__name:"trucks",props:{trucks:Array},setup(_){const c=y(!1),f=y(!1),u=y(null);function k(){c.value||(c.value=!0,V.visit("/trucks/fetch",{method:"get",preserveState:!0,onFinish:()=>{c.value=!1}}))}const s=j({unitname:"",status:""}),C=m=>{u.value=m,s.unitname=m.unitname,s.status=m.status,f.value=!0},M=()=>{u.value&&s.put(`/trucks/${u.value.id}`,{onSuccess:()=>b(),onError:m=>{console.log("Errors:",m)}})},b=()=>{f.value=!1,s.reset(),u.value=null};let v=1;return(m,t)=>{const S=F("Spinner");return n(),a(g,null,[r(o(T),{title:"Trucks"}),r(P,null,{default:d(()=>[r($,null,{default:d(()=>[r(z,null,{default:d(()=>[r(H,null,{default:d(()=>[...t[2]||(t[2]=[p("Trucks",-1)])]),_:1}),e("div",null,[e("div",null,[r(w,{disabled:c.value,onClick:k},{default:d(()=>[t[4]||(t[4]=e("svg",{class:"w-5 h-5 mr-2 -ml-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),c.value?(n(),a("svg",R,[...t[3]||(t[3]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(n(),a("i",q)),p(" "+i(c.value?"Syncing...":"Fetch Trucks"),1)]),_:1},8,["disabled"])])])]),_:1}),e("div",G,[t[6]||(t[6]=e("div",{class:"flex flex-wrap items-center justify-between gap-4 mb-4"},null,-1)),e("div",J,[e("table",K,[t[5]||(t[5]=e("thead",{class:"bg-gray-300 whitespace-nowrap"},[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Id "),e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Asset Name "),e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Last reported At "),e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Status "),e("th",{class:"px-4 py-3 text-left text-[14px] font-medium text-slate-600 border-r border-gray-200"}," Action ")])],-1)),e("tbody",O,[(n(!0),a(g,null,B(_.trucks,l=>(n(),a("tr",{class:"odd:bg-gray-50",key:l.id},[e("td",Q,i(E(v)?v.value++:v++),1),e("td",W,i(l.unitname),1),e("td",X,i(l.status===1?"Active":"Inactive"),1),e("td",Y,i(l.last_reported_at),1),e("td",Z,[e("button",{onClick:ie=>C(l)},[r(D)],8,ee)])]))),128))])])]),t[7]||(t[7]=e("div",{class:"m-4 mt-6 md:flex"},[e("p",{class:"flex-1 text-sm text-slate-600"}," Showind 1 to 5 of 100 entries "),e("div",{class:"flex items-center max-md:mt-4"},[e("p",{class:"text-sm text-slate-600"},"Display"),e("select",{class:"h-8 px-1 mx-4 text-sm border border-gray-300 rounded-md outline-none text-slate-900"},[e("option",null,"10"),e("option",null,"20"),e("option",null,"50"),e("option",null,"100")]),e("ul",{class:"flex justify-center space-x-3"},[e("li",{class:"flex items-center justify-center w-8 h-8 bg-gray-100 rounded-md shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 fill-gray-400",viewBox:"0 0 55.753 55.753"},[e("path",{d:"M12.745 23.915c.283-.282.59-.52.913-.727L35.266 1.581a5.4 5.4 0 0 1 7.637 7.638L24.294 27.828l18.705 18.706a5.4 5.4 0 0 1-7.636 7.637L13.658 32.464a5.367 5.367 0 0 1-.913-.727 5.367 5.367 0 0 1-1.572-3.911 5.369 5.369 0 0 1 1.572-3.911z","data-original":"#000000"})])]),e("li",{class:"flex items-center justify-center shrink-0 bg-blue-500 border hover:border-blue-500 border-blue-500 cursor-pointer text-sm font-medium text-white px-[13px] h-8 rounded-md"}," 1 "),e("li",{class:"flex items-center justify-center shrink-0 border border-gray-300 hover:border-blue-500 cursor-pointer text-sm font-medium text-slate-900 px-[13px] h-8 rounded-md"}," 2 "),e("li",{class:"flex items-center justify-center shrink-0 border border-gray-300 hover:border-blue-500 cursor-pointer text-sm font-medium text-slate-900 px-[13px] h-8 rounded-md"}," 3 "),e("li",{class:"flex items-center justify-center shrink-0 border border-gray-300 hover:border-blue-500 cursor-pointer text-sm font-medium text-slate-900 px-[13px] h-8 rounded-md"}," 4 "),e("li",{class:"flex items-center justify-center w-8 h-8 border border-gray-300 rounded-md cursor-pointer shrink-0 hover:border-blue-500"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 rotate-180 fill-gray-400",viewBox:"0 0 55.753 55.753"},[e("path",{d:"M12.745 23.915c.283-.282.59-.52.913-.727L35.266 1.581a5.4 5.4 0 0 1 7.637 7.638L24.294 27.828l18.705 18.706a5.4 5.4 0 0 1-7.636 7.637L13.658 32.464a5.367 5.367 0 0 1-.913-.727 5.367 5.367 0 0 1-1.572-3.911 5.369 5.369 0 0 1 1.572-3.911z","data-original":"#000000"})])])])])],-1))])]),_:1}),r(I,{show:f.value,onClose:b},{default:d(()=>[e("div",te,[e("h2",se,i(u.value?"Edit Truck":"Create New Repair"),1),e("form",{onSubmit:L(M,["prevent"]),class:"space-y-4"},[u.value?(n(),a("div",re,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Asset Name",-1)),h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o(s).unitname=l),type:"text",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},null,512),[[A,o(s).unitname]]),o(s).errors.unitname?(n(),a("div",oe,i(o(s).errors.unitname),1)):x("",!0)])):x("",!0),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).status=l),required:"",class:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded shadow-sm"},[...t[9]||(t[9]=[e("option",{value:""},"Select a Fault",-1),e("option",{value:1},"Active",-1),e("option",{value:0},"Inactive",-1)])],512),[[N,o(s).status]]),o(s).errors.status?(n(),a("div",le,i(o(s).errors.status),1)):x("",!0)]),e("div",ae,[r(U,{onClick:b},{default:d(()=>[...t[11]||(t[11]=[p("Cancel",-1)])]),_:1}),r(w,{type:"submit",disabled:o(s).processing},{default:d(()=>[p(i(u.value?"Update":"Create")+" ",1),m.isFetching||o(s).processing?(n(),a("span",ne,[r(S)])):x("",!0)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64)}}};export{ye as default};

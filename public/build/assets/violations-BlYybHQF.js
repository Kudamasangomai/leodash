import{x as v,u as k,g as a,a as s,d as i,h as _,w as l,b as e,f as d,e as w,i as m,o as n,t as x,F as b,p as C}from"./app-_ztCgBzv.js";import{_ as S}from"./AuthenticatedLayout-nmxZFGSo.js";import{M as T}from"./MainContent-DhWBV8g1.js";import{P as V,a as F}from"./PageTitle-CSyWY67c.js";import{P as E}from"./PrimaryButton-Bu4dY5ha.js";import{a as y,_ as P}from"./Modal-mxapu-aP.js";import{S as B}from"./Spinner-m9riFg2A.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"p-6 mb-4 space-y-6 rounded shadow-sm"},M={key:0,class:"mt-1 text-sm text-red-600"},N={class:"flex items-center"},$={key:0,class:"flex items-center"},R={class:"px-2 overflow-x-auto"},h={class:"min-w-full border border-gray-200"},j={class:"divide-y divide-gray-200 whitespace-nowrap"},D={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},O={key:1},U={class:"p-4 bg-green-200"},q={class:"flex justify-end mt-6"},X={__name:"violations",props:{v:Object,reports:Array},setup(A){const p=v(!1),f=()=>{p.value=!1},r=k({file:null});function c(o){const t=o.target.files&&o.target.files[0]?o.target.files[0]:null;r.file=t}function g(){r.file&&r.post("/violations/upload",{preserveScroll:!0,onSuccess:()=>{r.reset(),p.value=!0},onError:()=>{}})}return(o,t)=>(n(),a(b,null,[s(i(_),{title:"Violations"}),s(S,null,{default:l(()=>[s(T,null,{default:l(()=>[s(V,null,{default:l(()=>[s(F,null,{default:l(()=>[...t[1]||(t[1]=[d(" Violations Report",-1)])]),_:1}),t[2]||(t[2]=e("div",null,[e("div")],-1))]),_:1}),e("div",L,[e("form",{onSubmit:w(g,["prevent"]),enctype:"multipart/form-data",class:"space-y-4"},[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-700"}," Select Excel File (.xls or .xlsx) ",-1)),e("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:c,required:"",class:"block w-full p-4 mt-1 text-sm text-gray-700"},null,32),i(r).errors.file?(n(),a("div",M,x(i(r).errors.file),1)):m("",!0)]),e("div",N,[s(E,{type:"submit",disabled:i(r).processing},{default:l(()=>[t[4]||(t[4]=d(" Upload ",-1)),i(r).processing?(n(),a("span",$,[s(B)])):m("",!0)]),_:1},8,["disabled"]),s(y,{type:"button",class:"ms-3",onClick:t[0]||(t[0]=u=>i(r).reset("file"))},{default:l(()=>[...t[5]||(t[5]=[d(" Cancel ",-1)])]),_:1})])],32)]),e("div",R,[e("table",h,[t[12]||(t[12]=e("thead",{class:"bg-gray-200"},[e("tr",null,[e("th",{class:"p-2 border"},"Location"),e("th",{class:"p-2 border"},"Early Trucks"),e("th",{class:"p-2 border"},"Trucks E/R"),e("th",{class:"p-2 border"},"1st Truck"),e("th",{class:"p-2 border"},"Last Truck"),e("th",{class:"p-2 border"},"Last 3 Trucks")])],-1)),e("tbody",j,[o.violations?(n(!0),a(b,{key:0},C(o.violations,u=>(n(),a("tr",{key:u.id,class:"text-center odd:bg-gray-50"},[e("td",D,x(u),1),t[6]||(t[6]=e("td",{class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},null,-1)),t[7]||(t[7]=e("td",{class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},null,-1)),t[8]||(t[8]=e("td",{class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},null,-1)),t[9]||(t[9]=e("td",{class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},null,-1)),t[10]||(t[10]=e("td",{class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},null,-1))]))),128)):(n(),a("tr",O,[...t[11]||(t[11]=[e("td",null,"nothign to show",-1)])]))])])])]),_:1}),s(P,{show:p.value,onClose:f},{default:l(()=>[e("div",U,[t[14]||(t[14]=e("h2",{class:"text-lg font-medium text-gray-900"}," Violation Report Succesfully Generated ",-1)),e("div",q,[s(y,{onClick:f},{default:l(()=>[...t[13]||(t[13]=[d(" Ok ",-1)])]),_:1})])])]),_:1},8,["show"])]),_:1})],64))}};export{X as default};

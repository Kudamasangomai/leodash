import{p as _,u as F,g as i,a as s,d as p,h as M,w as r,b as t,f as u,e as B,i as h,o as c,t as o,F as y,q as C}from"./app-Dt9lbxyC.js";import{_ as N}from"./AuthenticatedLayout-DNE-oeeU.js";import{M as P}from"./MainContent-COCTe_dy.js";import{P as $,a as j}from"./PageTitle-DbfWxiQb.js";import{P as O}from"./PrimaryButton-C8WlxReI.js";import{a as v,_ as k}from"./SecondaryButton-CwX36pS6.js";import{S as q}from"./Spinner-DHjdbak7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"p-6 mb-4 space-y-6 rounded shadow-sm"},R={key:0,class:"mt-1 text-sm text-red-600"},T={class:"flex items-center"},U={key:0,class:"flex items-center"},A={class:"mb-2 text-lg font-bold"},G={class:"mb-2 text-right"},H=["onClick"],I={class:"px-2 overflow-x-auto"},z=["id"],J={class:"divide-y divide-gray-200 whitespace-nowrap"},K={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Q={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},W={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},X={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Y={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},Z={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},tt={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},et={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},st={class:"px-4 py-3 text-[14px] text-slate-900 border-r border-gray-200"},ot={key:1},lt={class:"p-4"},rt={class:"flex justify-end mt-6"},at={class:"p-4"},dt={class:"text-lg font-medium text-gray-900"},nt={class:"font-bold"},it={class:"flex justify-end mt-6"},yt={__name:"violations",props:{violations:Object},setup(S){const b=_(!1),x=_(!1),f=()=>{b.value=!1,x.value=!1},a=F({file:null});function E(d){const e=d.target.files&&d.target.files[0]?d.target.files[0]:null;a.file=e}function D(){a.file&&a.post("/violations/upload",{preserveScroll:!0,onSuccess:()=>{a.reset(),b.value=!0},onError:()=>{}})}const g=_("");function V(d){g.value=d,x.value=!0}function w(d){const e=document.getElementById("table-"+d);if(!e)return;const n=document.createElement("textarea");n.value=e.innerText,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),x.value=!0,V(d)}return(d,e)=>(c(),i(y,null,[s(p(M),{title:"Violations"}),s(N,null,{default:r(()=>[s(P,null,{default:r(()=>[s($,null,{default:r(()=>[s(j,null,{default:r(()=>[...e[1]||(e[1]=[u(" Daily Violations Report",-1)])]),_:1}),e[2]||(e[2]=t("div",null,[t("div")],-1))]),_:1}),t("div",L,[t("form",{onSubmit:B(D,["prevent"]),enctype:"multipart/form-data",class:"space-y-4"},[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"}," Select Excel File (.xls or .xlsx) ",-1)),t("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:E,required:"",class:"block w-full p-4 mt-1 text-sm text-gray-700"},null,32),p(a).errors.file?(c(),i("div",R,o(p(a).errors.file),1)):h("",!0)]),t("div",T,[s(O,{type:"submit",disabled:p(a).processing},{default:r(()=>[e[4]||(e[4]=u(" Upload ",-1)),p(a).processing?(c(),i("span",U,[s(q)])):h("",!0)]),_:1},8,["disabled"]),s(v,{type:"button",class:"ms-3",onClick:e[0]||(e[0]=n=>p(a).reset("file"))},{default:r(()=>[...e[5]||(e[5]=[u(" Cancel ",-1)])]),_:1})])],32)]),(c(!0),i(y,null,C(S.violations,(n,m)=>(c(),i("div",{key:m,class:"mb-8 text-center"},[t("h2",A,o(m)+" Events",1),t("div",G,[t("button",{onClick:l=>w(m),class:"px-3 py-1 text-white bg-blue-500 rounded hover:bg-blue-600"}," Copy Table ",8,H)]),t("div",I,[t("table",{id:"table-"+m,class:"min-w-full border border-gray-200"},[e[7]||(e[7]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"p-2 border"},"Date"),t("th",{class:"p-2 border"},"Asset"),t("th",{class:"p-2 border"},"Driver"),t("th",{class:"p-2 border"},"Location"),t("th",{class:"p-2 border"},"Duration"),t("th",{class:"p-2 border"},"Max Speed"),t("th",{class:"p-2 border"},"Destination"),t("th",{class:"p-2 border"},"Coordinates"),t("th",{class:"p-2 border"},"Event")])],-1)),t("tbody",J,[n?(c(!0),i(y,{key:0},C(n,l=>(c(),i("tr",{key:l.id,class:"text-center odd:bg-gray-50"},[t("td",K,o(l.date),1),t("td",Q,o(l.asset),1),t("td",W,o(l.driver),1),t("td",X,o(l.location),1),t("td",Y,o(l.duration),1),t("td",Z,o(l.max_speed),1),t("td",tt,o(l.destination),1),t("td",et,o(l.coordinates),1),t("td",st,o(l.event_type),1)]))),128)):(c(),i("tr",ot,[...e[6]||(e[6]=[t("td",{colspan:"6",class:"py-3 text-center"}," Nothing to show ",-1)])]))])],8,z)])]))),128))]),_:1}),s(k,{show:b.value,onClose:f},{default:r(()=>[t("div",lt,[e[9]||(e[9]=t("h2",{class:"text-lg font-medium text-gray-900"}," Violation Report Succesfully Generated ",-1)),t("div",rt,[s(v,{onClick:f},{default:r(()=>[...e[8]||(e[8]=[u(" Ok ",-1)])]),_:1})])])]),_:1},8,["show"]),s(k,{show:x.value,onClose:f},{default:r(()=>[t("div",at,[t("h2",dt,[t("span",nt,o(g.value),1),e[10]||(e[10]=u(" Succesfully Copied to Clipboard ",-1))]),t("div",it,[s(v,{onClick:f},{default:r(()=>[...e[11]||(e[11]=[u(" Ok ",-1)])]),_:1})])])]),_:1},8,["show"])]),_:1})],64))}};export{yt as default};
